{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/phil/Dev/philplaysbass/app/api/spotify/route.ts"],"sourcesContent":["// pages/api/spotify/token.ts\nimport type { NextApiRequest, NextApiResponse } from \"next\";\n\nexport async function handler(req: NextApiRequest, res: NextApiResponse) {\n\tconst { code } = req.body;\n\n\tif (!code) {\n\t\treturn res.status(400).json({ error: \"Authorization code is missing\" });\n\t}\n\n\tconst params = new URLSearchParams({\n\t\tgrant_type: \"authorization_code\",\n\t\tcode,\n\t\tredirect_uri: process.env.SPOTIFY_REDIRECT_URI!,\n\t\tclient_id: process.env.SPOTIFY_CLIENT_ID!,\n\t\tclient_secret: process.env.SPOTIFY_CLIENT_SECRET!,\n\t});\n\n\ttry {\n\t\tconst response = await fetch(\"https://accounts.spotify.com/api/token\", {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\n\t\t\t},\n\t\t\tbody: params.toString(),\n\t\t});\n\n\t\tconst data = await response.json();\n\n\t\tif (!response.ok) {\n\t\t\treturn res\n\t\t\t\t.status(response.status)\n\t\t\t\t.json({ error: data.error_description });\n\t\t}\n\n\t\t// Optional: store refresh_token in a cookie or DB\n\t\treturn res.status(200).json(data); // access_token, refresh_token, expires_in\n\t} catch (err) {\n\t\tconsole.error(\"[Spotify Token Error]\", err);\n\t\treturn res.status(500).json({ error: \"Internal Server Error\" });\n\t}\n}\n"],"names":[],"mappings":"AAAA,6BAA6B;;;;AAGtB,eAAe,QAAQ,GAAmB,EAAE,GAAoB;IACtE,MAAM,EAAE,IAAI,EAAE,GAAG,IAAI,IAAI;IAEzB,IAAI,CAAC,MAAM;QACV,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAgC;IACtE;IAEA,MAAM,SAAS,IAAI,gBAAgB;QAClC,YAAY;QACZ;QACA,cAAc,QAAQ,GAAG,CAAC,oBAAoB;QAC9C,WAAW,QAAQ,GAAG,CAAC,iBAAiB;QACxC,eAAe,QAAQ,GAAG,CAAC,qBAAqB;IACjD;IAEA,IAAI;QACH,MAAM,WAAW,MAAM,MAAM,0CAA0C;YACtE,QAAQ;YACR,SAAS;gBACR,gBAAgB;YACjB;YACA,MAAM,OAAO,QAAQ;QACtB;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,IAAI,CAAC,SAAS,EAAE,EAAE;YACjB,OAAO,IACL,MAAM,CAAC,SAAS,MAAM,EACtB,IAAI,CAAC;gBAAE,OAAO,KAAK,iBAAiB;YAAC;QACxC;QAEA,kDAAkD;QAClD,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC,OAAO,0CAA0C;IAC9E,EAAE,OAAO,KAAK;QACb,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAwB;IAC9D;AACD","debugId":null}}]
}