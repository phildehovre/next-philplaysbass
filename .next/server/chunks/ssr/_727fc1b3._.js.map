{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/phil/Dev/philplaysbass/hooks/useCookies.ts"],"sourcesContent":["const useCookies = () => {\n\tconst getCookie = (name: string) => {\n\t\tconst cookieString = document.cookie\n\t\t\t.split(\"; \")\n\t\t\t.find((row) => row.startsWith(`${name}=`));\n\t\treturn cookieString ? cookieString.split(\"=\")[1] : null;\n\t};\n\n\tconst setCookie = (name: string, value: string, days = 7) => {\n\t\tconst expires = new Date();\n\t\texpires.setTime(expires.getTime() + days * 24 * 60 * 60 * 1000);\n\t\tdocument.cookie = `${name}=${value}; expires=${expires.toUTCString()}; path=/`;\n\t};\n\n\tconst deleteCookie = (name: string) => {\n\t\tdocument.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;\n\t};\n\n\treturn { getCookie, setCookie, deleteCookie };\n};\n\nexport default useCookies;\n"],"names":[],"mappings":";;;AAAA,MAAM,aAAa;IAClB,MAAM,YAAY,CAAC;QAClB,MAAM,eAAe,SAAS,MAAM,CAClC,KAAK,CAAC,MACN,IAAI,CAAC,CAAC,MAAQ,IAAI,UAAU,CAAC,GAAG,KAAK,CAAC,CAAC;QACzC,OAAO,eAAe,aAAa,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG;IACpD;IAEA,MAAM,YAAY,CAAC,MAAc,OAAe,OAAO,CAAC;QACvD,MAAM,UAAU,IAAI;QACpB,QAAQ,OAAO,CAAC,QAAQ,OAAO,KAAK,OAAO,KAAK,KAAK,KAAK;QAC1D,SAAS,MAAM,GAAG,GAAG,KAAK,CAAC,EAAE,MAAM,UAAU,EAAE,QAAQ,WAAW,GAAG,QAAQ,CAAC;IAC/E;IAEA,MAAM,eAAe,CAAC;QACrB,SAAS,MAAM,GAAG,GAAG,KAAK,iDAAiD,CAAC;IAC7E;IAEA,OAAO;QAAE;QAAW;QAAW;IAAa;AAC7C;uCAEe","debugId":null}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///Users/phil/Dev/philplaysbass/services/membership.ts"],"sourcesContent":["import { useState, useCallback } from \"react\";\n\nexport const credentials = {\n\tcredentials: \"include\",\n\theaders: {\n\t\t\"Access-Control-Allow-Origin\": \"no-cors\",\n\t\t\"Content-Type\": \"application/json\",\n\t},\n};\n\nexport const useApiCall = (callback) => {\n\tconst [isLoading, setIsLoading] = useState(false);\n\tconst [result, setResult] = useState(null);\n\tconst [error, setError] = useState(null);\n\n\tconst execute = useCallback(\n\t\tasync (...args) => {\n\t\t\tsetIsLoading(true);\n\t\t\tsetError(null);\n\t\t\ttry {\n\t\t\t\tconst res = await callback(...args);\n\t\t\t\tsetResult(res);\n\t\t\t\treturn res; // Allows the caller to use the result\n\t\t\t} catch (err) {\n\t\t\t\tsetError(err);\n\t\t\t\tconsole.error(\"API call error:\", err);\n\t\t\t} finally {\n\t\t\t\tsetIsLoading(false);\n\t\t\t}\n\t\t},\n\t\t[callback]\n\t);\n\n\treturn { execute, result, isLoading, error };\n};\n\nexport const createMembership = async () => {\n\ttry {\n\t\tconst res = await fetch(url + \"/membership\", {\n\t\t\tmethod: \"POST\",\n\t\t\t...credentials,\n\t\t\tbody: JSON.stringify({ password, email }),\n\t\t});\n\t\tconst data = await res.json();\n\t\tif (data.user) {\n\t\t\tnavigate(\"/\");\n\t\t}\n\t\tconsole.log(data);\n\t\tconsole.log(\"membership created\");\n\t} catch (error) {\n\t\tconsole.error(error);\n\t}\n};\n\nexport const createUser = async (data) => {\n\ttry {\n\t\tconst res = await fetch(`${import.meta.env.CLIENT_URL}/signup`, {\n\t\t\tmethod: \"POST\",\n\t\t\t...credentials,\n\t\t\tbody: JSON.stringify({\n\t\t\t\temail: data.email,\n\t\t\t}),\n\t\t});\n\t\tconst data = await res.json();\n\t\treturn data;\n\t} catch (err) {\n\t\tthrow new Error(err);\n\t}\n};\n"],"names":[],"mappings":";;;;;;AAAA;;;;;;;AAEO,MAAM,cAAc;IAC1B,aAAa;IACb,SAAS;QACR,+BAA+B;QAC/B,gBAAgB;IACjB;AACD;AAEO,MAAM,aAAa,CAAC;IAC1B,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACrC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEnC,MAAM,UAAU,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EACzB,OAAO,GAAG;QACT,aAAa;QACb,SAAS;QACT,IAAI;YACH,MAAM,MAAM,MAAM,YAAY;YAC9B,UAAU;YACV,OAAO,KAAK,sCAAsC;QACnD,EAAE,OAAO,KAAK;YACb,SAAS;YACT,QAAQ,KAAK,CAAC,mBAAmB;QAClC,SAAU;YACT,aAAa;QACd;IACD,GACA;QAAC;KAAS;IAGX,OAAO;QAAE;QAAS;QAAQ;QAAW;IAAM;AAC5C;AAEO,MAAM,mBAAmB;IAC/B,IAAI;QACH,MAAM,MAAM,MAAM,MAAM,MAAM,eAAe;YAC5C,QAAQ;YACR,GAAG,WAAW;YACd,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAU;YAAM;QACxC;QACA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,IAAI,KAAK,IAAI,EAAE;YACd,SAAS;QACV;QACA,QAAQ,GAAG,CAAC;QACZ,QAAQ,GAAG,CAAC;IACb,EAAE,OAAO,OAAO;QACf,QAAQ,KAAK,CAAC;IACf;AACD;AAEO,MAAM,aAAa,OAAO;IAChC,IAAI;QACH,MAAM,MAAM,MAAM,MAAM,GAAG,8BAAY,GAAG,CAAC,UAAU,CAAC,OAAO,CAAC,EAAE;YAC/D,QAAQ;YACR,GAAG,WAAW;YACd,MAAM,KAAK,SAAS,CAAC;gBACpB,OAAO,KAAK,KAAK;YAClB;QACD;QACA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,OAAO;IACR,EAAE,OAAO,KAAK;QACb,MAAM,IAAI,MAAM;IACjB;AACD","debugId":null}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///Users/phil/Dev/philplaysbass/components/payment/PaymentForm.tsx"],"sourcesContent":["\"use client\";\nimport React, { useEffect, useState } from \"react\";\nimport useCookies from \"../../hooks/useCookies\";\nimport PaymentForm from \"./PaymentForm\";\nimport \"./Checkout.css\";\nimport { useApiCall } from \"../../services/membership\";\nimport { createUser, createMembership } from \"../../services/membership\";\nimport { PaymentDetails } from \"@/types/types\";\n\nconst Checkout = () => {\n\tconst [paymentDetails, setPaymentDetails] = useState<PaymentDetails>();\n\tconst { setCookie, getCookie, deleteCookie } = useCookies();\n\n\tconst {\n\t\texecute: exeUser,\n\t\tisLoading: isUserLoading,\n\t\tuserError,\n\t} = useApiCall(createUser);\n\n\tconst {\n\t\texecute: exeMembership,\n\t\tisLoading: isMembershipLoading,\n\t\tmembershipError,\n\t} = useApiCall(createMembership);\n\n\tuseEffect(() => {\n\t\tif (membershipError || userError) {\n\t\t\tconsole.error(\"Membership/User error\", { membershipError, userError });\n\t\t}\n\t}, [membershipError, userError]);\n\n\tconst handleSubmitRegistration = async (data: PaymentDetails) => {\n\t\tconsole.log(\"Received payment form data\", data);\n\t\tsetPaymentDetails(data);\n\n\t\ttry {\n\t\t\tconst userData = {\n\t\t\t\temail: \"test@email.com\", // replace later\n\t\t\t\tpassword: \"123456\", // replace later\n\t\t\t};\n\n\t\t\tconst user = await exeUser(userData);\n\t\t\tif (!user) throw new Error(\"User creation failed\");\n\n\t\t\tconst membershipData = {\n\t\t\t\ttype: \"membership\",\n\t\t\t\tstartDate: new Date(),\n\t\t\t\tendDate: new Date(), // update as needed\n\t\t\t\tactive: true,\n\t\t\t\towner: user._id,\n\t\t\t};\n\n\t\t\tconst membership = await exeMembership(membershipData);\n\t\t\tif (!membership) throw new Error(\"Membership creation failed\");\n\n\t\t\tconsole.log(\"User + Membership created\", user, membership);\n\t\t\t// navigate(\"/\");\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"checkout_ctn\">\n\t\t\t<h1>Payment</h1>\n\t\t\t<PaymentForm\n\t\t\t\tonSubmit={handleSubmitRegistration}\n\t\t\t\tpaymentDetails={paymentDetails}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nexport default Checkout;\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AAEA;AALA;;;;;;;;AASA,MAAM,WAAW;IAChB,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD;IACnD,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,YAAY,EAAE,GAAG,CAAA,GAAA,mHAAA,CAAA,UAAU,AAAD;IAExD,MAAM,EACL,SAAS,OAAO,EAChB,WAAW,aAAa,EACxB,SAAS,EACT,GAAG,CAAA,GAAA,sHAAA,CAAA,aAAU,AAAD,EAAE,sHAAA,CAAA,aAAU;IAEzB,MAAM,EACL,SAAS,aAAa,EACtB,WAAW,mBAAmB,EAC9B,eAAe,EACf,GAAG,CAAA,GAAA,sHAAA,CAAA,aAAU,AAAD,EAAE,sHAAA,CAAA,mBAAgB;IAE/B,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACT,IAAI,mBAAmB,WAAW;YACjC,QAAQ,KAAK,CAAC,yBAAyB;gBAAE;gBAAiB;YAAU;QACrE;IACD,GAAG;QAAC;QAAiB;KAAU;IAE/B,MAAM,2BAA2B,OAAO;QACvC,QAAQ,GAAG,CAAC,8BAA8B;QAC1C,kBAAkB;QAElB,IAAI;YACH,MAAM,WAAW;gBAChB,OAAO;gBACP,UAAU;YACX;YAEA,MAAM,OAAO,MAAM,QAAQ;YAC3B,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;YAE3B,MAAM,iBAAiB;gBACtB,MAAM;gBACN,WAAW,IAAI;gBACf,SAAS,IAAI;gBACb,QAAQ;gBACR,OAAO,KAAK,GAAG;YAChB;YAEA,MAAM,aAAa,MAAM,cAAc;YACvC,IAAI,CAAC,YAAY,MAAM,IAAI,MAAM;YAEjC,QAAQ,GAAG,CAAC,6BAA6B,MAAM;QAC/C,iBAAiB;QAClB,EAAE,OAAO,KAAK;YACb,QAAQ,KAAK,CAAC;QACf;IACD;IAEA,qBACC,8OAAC;QAAI,WAAU;;0BACd,8OAAC;0BAAG;;;;;;0BACJ,8OAAC,qIAAA,CAAA,UAAW;gBACX,UAAU;gBACV,gBAAgB;;;;;;;;;;;;AAIpB;uCAEe","debugId":null}},
    {"offset": {"line": 213, "column": 0}, "map": {"version":3,"sources":["file:///Users/phil/Dev/philplaysbass/components/payment/Checkout.tsx"],"sourcesContent":["\"use client\";\nimport React, { useEffect, useState } from \"react\";\nimport useCookies from \"../../hooks/useCookies\";\nimport PaymentForm from \"./PaymentForm\";\nimport \"./Checkout.css\";\nimport { useApiCall } from \"../../services/membership\";\nimport { createUser, createMembership } from \"../../services/membership\";\nimport { PaymentDetails } from \"@/types/types\";\n\nconst Checkout = () => {\n\tconst [paymentDetails, setPaymentDetails] = useState<PaymentDetails>();\n\tconst { setCookie, getCookie, deleteCookie } = useCookies();\n\n\tconst {\n\t\texecute: exeUser,\n\t\tisLoading: isUserLoading,\n\t\tuserError,\n\t} = useApiCall(createUser);\n\n\tconst {\n\t\texecute: exeMembership,\n\t\tisLoading: isMembershipLoading,\n\t\tmembershipError,\n\t} = useApiCall(createMembership);\n\n\tuseEffect(() => {\n\t\tif (membershipError || userError) {\n\t\t\tconsole.error(\"Membership/User error\", { membershipError, userError });\n\t\t}\n\t}, [membershipError, userError]);\n\n\tconst handleSubmitRegistration = async (data: PaymentDetails) => {\n\t\tconsole.log(\"Received payment form data\", data);\n\t\tsetPaymentDetails(data);\n\n\t\ttry {\n\t\t\tconst userData = {\n\t\t\t\temail: \"test@email.com\", // replace later\n\t\t\t\tpassword: \"123456\", // replace later\n\t\t\t};\n\n\t\t\tconst user = await exeUser(userData);\n\t\t\tif (!user) throw new Error(\"User creation failed\");\n\n\t\t\tconst membershipData = {\n\t\t\t\ttype: \"membership\",\n\t\t\t\tstartDate: new Date(),\n\t\t\t\tendDate: new Date(), // update as needed\n\t\t\t\tactive: true,\n\t\t\t\towner: user._id,\n\t\t\t};\n\n\t\t\tconst membership = await exeMembership(membershipData);\n\t\t\tif (!membership) throw new Error(\"Membership creation failed\");\n\n\t\t\tconsole.log(\"User + Membership created\", user, membership);\n\t\t\t// navigate(\"/\");\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"checkout_ctn\">\n\t\t\t<h1>Payment</h1>\n\t\t\t<PaymentForm\n\t\t\t\tonSubmit={handleSubmitRegistration}\n\t\t\t\tpaymentDetails={paymentDetails}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nexport default Checkout;\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AAEA;AALA;;;;;;;;AASA,MAAM,WAAW;IAChB,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD;IACnD,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,YAAY,EAAE,GAAG,CAAA,GAAA,mHAAA,CAAA,UAAU,AAAD;IAExD,MAAM,EACL,SAAS,OAAO,EAChB,WAAW,aAAa,EACxB,SAAS,EACT,GAAG,CAAA,GAAA,sHAAA,CAAA,aAAU,AAAD,EAAE,sHAAA,CAAA,aAAU;IAEzB,MAAM,EACL,SAAS,aAAa,EACtB,WAAW,mBAAmB,EAC9B,eAAe,EACf,GAAG,CAAA,GAAA,sHAAA,CAAA,aAAU,AAAD,EAAE,sHAAA,CAAA,mBAAgB;IAE/B,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACT,IAAI,mBAAmB,WAAW;YACjC,QAAQ,KAAK,CAAC,yBAAyB;gBAAE;gBAAiB;YAAU;QACrE;IACD,GAAG;QAAC;QAAiB;KAAU;IAE/B,MAAM,2BAA2B,OAAO;QACvC,QAAQ,GAAG,CAAC,8BAA8B;QAC1C,kBAAkB;QAElB,IAAI;YACH,MAAM,WAAW;gBAChB,OAAO;gBACP,UAAU;YACX;YAEA,MAAM,OAAO,MAAM,QAAQ;YAC3B,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;YAE3B,MAAM,iBAAiB;gBACtB,MAAM;gBACN,WAAW,IAAI;gBACf,SAAS,IAAI;gBACb,QAAQ;gBACR,OAAO,KAAK,GAAG;YAChB;YAEA,MAAM,aAAa,MAAM,cAAc;YACvC,IAAI,CAAC,YAAY,MAAM,IAAI,MAAM;YAEjC,QAAQ,GAAG,CAAC,6BAA6B,MAAM;QAC/C,iBAAiB;QAClB,EAAE,OAAO,KAAK;YACb,QAAQ,KAAK,CAAC;QACf;IACD;IAEA,qBACC,8OAAC;QAAI,WAAU;;0BACd,8OAAC;0BAAG;;;;;;0BACJ,8OAAC,qIAAA,CAAA,UAAW;gBACX,UAAU;gBACV,gBAAgB;;;;;;;;;;;;AAIpB;uCAEe","debugId":null}}]
}